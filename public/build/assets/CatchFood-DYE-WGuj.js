import{I as V,J as q,c,a as H,u as J,h as X,b as e,t as v,n as W,d as Y,e as T,F as K,r as Q,N as j,v as h,f as d,a1 as Z,o as f}from"./app-uN0urMYZ.js";import{c as ee}from"./confetti.module-oQXWb4Lk.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={id:"game-area",class:"min-h-screen bg-gradient-to-b from-sky-200 to-sky-100 font-['Comic_Sans_MS'] overflow-hidden relative select-none"},oe={class:"absolute top-4 left-4 right-4 z-30 flex justify-between items-center max-w-2xl mx-auto"},se={class:"bg-white/90 backdrop-blur-sm px-6 py-2 rounded-full shadow-xl border-4 border-sky-300 flex flex-col items-center min-w-[100px]"},le={class:"text-3xl font-black text-sky-600 leading-none"},ne={class:"bg-white/90 backdrop-blur-sm px-6 py-2 rounded-full shadow-xl border-4 border-red-300 flex flex-col items-center min-w-[100px]"},re={key:0,class:"absolute inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col items-center justify-center text-white p-6 text-center animate-in fade-in duration-300"},ie={key:1,class:"absolute inset-0 z-50 bg-black/70 backdrop-blur-md flex flex-col items-center justify-center text-white p-6 text-center animate-in zoom-in duration-300"},de={class:"bg-white p-8 rounded-[3rem] shadow-2xl border-8 border-yellow-400 max-w-sm w-full relative overflow-hidden"},ue={class:"text-8xl mb-2"},ce={class:"text-7xl font-black text-transparent bg-clip-text bg-gradient-to-b from-yellow-400 to-orange-500 mb-8 drop-shadow-sm filter"},ve={class:"absolute inset-0 w-full h-full pointer-events-none"},fe={key:2,class:"absolute inset-0 z-40 flex pointer-events-auto"},me="üß∫",G=60,be={__name:"CatchFood",props:{student:Object},setup(O){const B=O,A=["üçé","ü•¶","ü•ï","üçó","üêü","ü•õ","üçá","üçå","üåΩ"],I=["üç¨","üç©","üçü","ü¶†","ü™∞","ü•§","üï∑Ô∏è"],s=d(0),m=d(G),u=d(!1),x=d(!1),l=d(50),b=d(0),n=d([]);let y=0,g=null,w=null,k=null;const o={left:!1,right:!1},L=()=>{$(),u.value=!0,y=performance.now(),k=setInterval(()=>{m.value--,m.value<=0&&R()},1e3),g=requestAnimationFrame(S),E()},$=()=>{s.value=0,m.value=G,n.value=[],l.value=50,b.value=0,x.value=!1,o.left=!1,o.right=!1},E=()=>{if(!u.value)return;P();const a=Math.max(600,1200-s.value*1.5);w=setTimeout(E,a)},P=()=>{const a=Math.random()>.35,t=a?A[Math.floor(Math.random()*A.length)]:I[Math.floor(Math.random()*I.length)];n.value.push({id:Date.now()+Math.random(),x:Math.random()*80+10,y:-15,content:t,type:a?"good":"bad",speed:Math.random()*.1+.1+s.value*2e-4})},S=a=>{if(!u.value)return;const t=a-y;y=a;const r=.08*t;o.left&&l.value>5?(l.value-=r,b.value=-10):o.right&&l.value<95?(l.value+=r,b.value=10):b.value=0;for(let p=n.value.length-1;p>=0;p--){const i=n.value[p];if(i.y+=i.speed*(t/2),i.y>80&&i.y<95&&Math.abs(i.x-l.value)<15){i.type==="good"?s.value+=10:(s.value=Math.max(0,s.value-20),navigator.vibrate&&navigator.vibrate(200),U()),n.value.splice(p,1);continue}i.y>105&&n.value.splice(p,1)}g=requestAnimationFrame(S)},F=a=>{(a.key==="ArrowLeft"||a.key==="a")&&(o.left=!0),(a.key==="ArrowRight"||a.key==="d")&&(o.right=!0)},C=a=>{(a.key==="ArrowLeft"||a.key==="a")&&(o.left=!1),(a.key==="ArrowRight"||a.key==="d")&&(o.right=!1)},N=()=>o.left=!0,M=()=>o.left=!1,z=()=>o.right=!0,_=()=>o.right=!1,U=()=>{const a=document.getElementById("game-area");a&&(a.classList.add("shake-anim"),setTimeout(()=>a.classList.remove("shake-anim"),500))},R=()=>{u.value=!1,x.value=!0,cancelAnimationFrame(g),clearTimeout(w),clearInterval(k),s.value>100&&ee({particleCount:200,spread:120,origin:{y:.6}})},D=()=>{R(),Z.visit(`/dashboard/${B.student.id}`)};return V(()=>{window.addEventListener("keydown",F),window.addEventListener("keyup",C)}),q(()=>{window.removeEventListener("keydown",F),window.removeEventListener("keyup",C),cancelAnimationFrame(g),clearTimeout(w),clearInterval(k)}),(a,t)=>(f(),c(K,null,[H(J(X),{title:"Tangkap Makanan Sehat"}),e("div",ae,[t[6]||(t[6]=e("div",{class:"absolute top-10 left-10 text-8xl opacity-30 animate-pulse delay-700"},"‚òÅÔ∏è",-1)),t[7]||(t[7]=e("div",{class:"absolute top-32 right-10 text-7xl opacity-30 animate-pulse"},"‚òÅÔ∏è",-1)),t[8]||(t[8]=e("div",{class:"absolute bottom-0 w-full h-24 bg-gradient-to-t from-green-300 to-transparent opacity-50"},null,-1)),e("div",oe,[e("div",se,[t[0]||(t[0]=e("p",{class:"text-[10px] text-gray-400 font-black uppercase tracking-widest"},"Skor",-1)),e("p",le,v(s.value),1)]),e("div",ne,[t[1]||(t[1]=e("p",{class:"text-[10px] text-gray-400 font-black uppercase tracking-widest"},"Waktu",-1)),e("p",{class:W(["text-3xl font-black leading-none",m.value<=10?"text-red-600 animate-ping":"text-red-500"])},v(m.value),3)])]),!u.value&&!x.value?(f(),c("div",re,[e("div",{class:"bg-white p-8 rounded-[3rem] shadow-2xl border-8 border-sky-400 max-w-sm w-full transform hover:scale-105 transition-transform"},[t[2]||(t[2]=Y('<div class="text-8xl mb-4 animate-bounce" data-v-53675b91>ü•ó</div><h1 class="text-3xl font-black mb-2 text-sky-600" data-v-53675b91>PANEN SEHAT</h1><div class="bg-sky-50 p-4 rounded-2xl mb-6" data-v-53675b91><p class="text-sky-800 font-bold text-sm leading-relaxed" data-v-53675b91> Tekan Tombol Kiri/Kanan <br data-v-53675b91>atau Panah di Keyboard ‚¨ÖÔ∏è‚û°Ô∏è<br data-v-53675b91> Tangkap <span class="text-xl" data-v-53675b91>üçé</span> Hindari <span class="text-xl" data-v-53675b91>ü¶†</span></p></div>',3)),e("button",{onClick:L,class:"w-full bg-gradient-to-b from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white text-xl font-black py-4 rounded-2xl shadow-[0_6px_0_#15803d] active:shadow-none active:translate-y-1 transition-all"}," MULAI MAIN ‚ñ∂ "),e("button",{onClick:D,class:"mt-6 text-sm text-gray-400 hover:text-gray-600 font-bold underline"},"Kembali ke Dashboard")])])):T("",!0),x.value?(f(),c("div",ie,[e("div",de,[e("div",ue,v(s.value>200?"üèÜ":s.value>100?"üåü":"üòÖ"),1),t[3]||(t[3]=e("h2",{class:"text-4xl font-black mb-1 text-gray-800"},"SELESAI!",-1)),e("div",ce,v(s.value),1),e("div",{class:"flex gap-3 w-full"},[e("button",{onClick:D,class:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold py-3 rounded-2xl border-b-4 border-gray-300 active:border-b-0 active:translate-y-1"},"Keluar"),e("button",{onClick:L,class:"flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-2xl shadow-[0_4px_0_#1d4ed8] active:shadow-none active:translate-y-1 border-b-4 border-blue-700 active:border-b-0"},"Main Lagi üîÑ")])])])):T("",!0),e("div",ve,[(f(!0),c(K,null,Q(n.value,r=>(f(),c("div",{key:r.id,class:"absolute text-5xl will-change-transform filter drop-shadow-md z-10",style:j({transform:`translate(${r.x}vw, ${r.y}vh)`})},v(r.content),5))),128)),e("div",{class:"absolute bottom-6 text-8xl will-change-transform drop-shadow-2xl z-20 transition-transform duration-100 ease-out",style:j({left:`${l.value}%`,transform:`translateX(-50%) rotate(${b.value}deg)`})},v(me),4)]),u.value?(f(),c("div",fe,[e("div",{onMousedown:N,onMouseup:M,onMouseleave:M,onTouchstart:h(N,["prevent"]),onTouchend:h(M,["prevent"]),class:"w-1/2 h-full flex items-center justify-start pl-4 cursor-pointer active:bg-white/10 transition-colors group tap-highlight-transparent"},[...t[4]||(t[4]=[e("div",{class:"bg-white/40 backdrop-blur-sm p-6 rounded-full shadow-lg transform transition-all group-active:scale-90 opacity-60"},[e("span",{class:"text-4xl text-sky-700"},"‚¨ÖÔ∏è")],-1)])],32),e("div",{onMousedown:z,onMouseup:_,onMouseleave:_,onTouchstart:h(z,["prevent"]),onTouchend:h(_,["prevent"]),class:"w-1/2 h-full flex items-center justify-end pr-4 cursor-pointer active:bg-white/10 transition-colors group tap-highlight-transparent"},[...t[5]||(t[5]=[e("div",{class:"bg-white/40 backdrop-blur-sm p-6 rounded-full shadow-lg transform transition-all group-active:scale-90 opacity-60"},[e("span",{class:"text-4xl text-sky-700"},"‚û°Ô∏è")],-1)])],32)])):T("",!0)])],64))}},he=te(be,[["__scopeId","data-v-53675b91"]]);export{he as default};
