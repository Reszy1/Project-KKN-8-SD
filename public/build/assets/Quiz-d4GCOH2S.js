import{c as a,b as e,u as w,a1 as k,L as u,t as n,M as S,F as A,R as T,i as q,a as B,w as K,o as r,j as f,a2 as z,s as p,z as F,a3 as $}from"./app-CncyC2s3.js";import{c as y}from"./confetti.module-oQXWb4Lk.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={key:0,class:"text-center animate-fade-in-up"},H={key:1,class:"w-full max-w-2xl"},M={key:0},L={class:"text-center mb-8"},N={class:"mb-8 bg-white p-4 rounded-3xl shadow-md flex items-center gap-4 border-2 border-white"},G={class:"flex-1 bg-gray-100 h-6 rounded-full overflow-hidden shadow-inner"},V={class:"text-sm font-bold bg-gray-100 px-2 py-1 rounded text-gray-500"},D={class:"bg-white rounded-[3rem] p-8 md:p-10 shadow-2xl border-4 border-white relative overflow-hidden transition-all"},I={class:"text-2xl md:text-3xl font-black text-center text-gray-800 mb-10 leading-snug"},Q={class:"grid grid-cols-1 gap-4"},R=["onClick","disabled"],U={class:"flex items-center gap-4"},J={class:"leading-tight"},O={key:1,class:"text-center animate-fade-in-up"},Y={class:"mb-8 relative inline-block"},P={class:"absolute -top-4 -right-4 bg-orange-500 text-white w-20 h-20 rounded-full flex items-center justify-center text-3xl font-black border-4 border-white shadow-xl rotate-12"},W={class:"text-2xl font-bold text-gray-500 mb-10"},X={class:"text-orange-500"},Z={key:0,class:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none bg-black/20 backdrop-blur-sm"},ee={key:0,class:"bg-green-500 text-white p-10 rounded-full shadow-2xl animate-bounce border-8 border-white flex flex-col items-center"},te={key:1,class:"bg-red-500 text-white p-10 rounded-full shadow-2xl animate-shake border-8 border-white flex flex-col items-center"},se={__name:"Quiz",props:{student:Object,questions:Array,type:String},setup(l){const d=l,s=F(()=>{switch(d.type){case"brushing":return{title:"ü¶∑ Kuis Gigi",bgApp:"bg-blue-50",textTitle:"text-blue-600",bar:"bg-blue-500",textCount:"text-blue-600",optHover:"hover:bg-blue-500 hover:border-blue-600",iconColor:"text-blue-600",btnBg:"bg-blue-500 hover:bg-blue-600",btnShadow:"shadow-blue-200",textScore:"text-blue-600"};case"handwashing":return{title:"üßº Kuis Tangan",bgApp:"bg-green-50",textTitle:"text-green-600",bar:"bg-green-500",textCount:"text-green-600",optHover:"hover:bg-green-500 hover:border-green-600",iconColor:"text-green-600",btnBg:"bg-green-500 hover:bg-green-600",btnShadow:"shadow-green-200",textScore:"text-green-600"};case"reproductive":return{title:"‚ù§Ô∏è Kuis Tubuhku",bgApp:"bg-pink-50",textTitle:"text-pink-600",bar:"bg-pink-500",textCount:"text-pink-600",optHover:"hover:bg-pink-500 hover:border-pink-600",iconColor:"text-pink-600",btnBg:"bg-pink-500 hover:bg-pink-600",btnShadow:"shadow-pink-200",textScore:"text-pink-600"};default:return{title:"Kuis Seru",bgApp:"bg-purple-50",textTitle:"text-purple-600",bar:"bg-purple-500",textCount:"text-purple-600",optHover:"hover:bg-purple-500 hover:border-purple-600",iconColor:"text-purple-600",btnBg:"bg-purple-500 hover:bg-purple-600",btnShadow:"shadow-purple-200",textScore:"text-purple-600"}}}),c=p(0),i=p(0),m=p(!1),b=p(null),x=p(!1),g=o=>{try{const t=new Audio(`/sounds/${o}.mp3`);t.volume=.5,t.play().catch(()=>{})}catch(t){console.error(t)}},C=o=>{if(x.value||(x.value=!0,!d.questions||d.questions.length===0))return;o===d.questions[c.value].answer?(i.value+=20,b.value="correct",g("success"),y({particleCount:50,spread:60,origin:{y:.7}})):(i.value=Math.max(0,i.value-10),b.value="wrong",g("wrong")),setTimeout(()=>{b.value=null,x.value=!1,c.value<d.questions.length-1?c.value++:_()},1500)},_=async()=>{m.value=!0,i.value>0&&(y({particleCount:150,spread:70,origin:{y:.6}}),g("success"));const o=new FormData;o.append("student_id",d.student.id),o.append("type",d.type),o.append("duration",i.value),o.append("is_quiz",1);try{await $.post("/activity/store",o,{headers:{"Content-Type":"multipart/form-data"}})}catch(t){console.error("Gagal simpan skor",t)}};return(o,t)=>(r(),a("div",{class:u(["min-h-screen flex flex-col items-center justify-center p-6 font-['Comic_Sans_MS'] transition-colors duration-500",s.value.bgApp])},[!l.questions||l.questions.length===0?(r(),a("div",E,[t[2]||(t[2]=e("div",{class:"text-7xl mb-4 grayscale opacity-50"},"üì≠",-1)),t[3]||(t[3]=e("h2",{class:"text-2xl font-black text-gray-700"},"Soal Belum Tersedia",-1)),t[4]||(t[4]=e("p",{class:"text-gray-500 mb-6"},"Minta Bu Guru untuk membuat soal kategori ini ya!",-1)),e("button",{onClick:t[0]||(t[0]=h=>w(k).get("/dashboard/"+l.student.id)),class:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform active:scale-95"}," Kembali ")])):(r(),a("div",H,[m.value?(r(),a("div",O,[e("div",Y,[t[5]||(t[5]=e("div",{class:"text-[140px] animate-bounce drop-shadow-2xl"},"üèÜ",-1)),e("div",P,n(i.value),1)]),e("h1",{class:u(["text-5xl font-black mb-2 tracking-tight",s.value.textTitle])},n(i.value>0?"HEBAT!":"BELAJAR LAGI YUK!"),3),e("p",W,[t[6]||(t[6]=q("Skor Akhir Kamu: ",-1)),e("span",X,n(i.value),1)]),e("button",{onClick:t[1]||(t[1]=h=>w(k).get("/dashboard/"+l.student.id)),class:u(["text-white text-2xl font-black px-12 py-5 rounded-[40px] shadow-xl active:shadow-none active:translate-y-2 transition-all hover:scale-105",`${s.value.btnBg} ${s.value.btnShadow}`])}," KEMBALI KE MENU üè† ",2)])):(r(),a("div",M,[e("div",L,[e("h1",{class:u(["text-4xl md:text-5xl font-black uppercase tracking-wider drop-shadow-sm",s.value.textTitle])},n(s.value.title),3)]),e("div",N,[e("div",G,[e("div",{class:u(["h-full transition-all duration-500 ease-out",s.value.bar]),style:S({width:(c.value+1)/l.questions.length*100+"%"})},null,6)]),e("span",{class:u(["font-black text-lg",s.value.textCount])},n(c.value+1)+"/"+n(l.questions.length),3),e("span",V," Skor: "+n(i.value),1)]),e("div",D,[e("h2",I,n(l.questions[c.value].question),1),e("div",Q,[(r(!0),a(A,null,T(l.questions[c.value].options,(h,v)=>(r(),a("button",{key:v,onClick:oe=>C(v),disabled:x.value,class:u(["group relative bg-[#F8F7FF] p-5 rounded-2xl text-xl font-bold transition-all text-gray-700 hover:text-white border-b-4 border-gray-200 active:border-b-0 active:translate-y-1 text-left",`${s.value.optHover} hover:shadow-lg`])},[e("span",U,[e("span",{class:u(["w-12 h-12 shrink-0 bg-white rounded-full flex items-center justify-center shadow-md text-lg font-black transition-transform group-hover:scale-110",s.value.iconColor])},n(String.fromCharCode(65+v)),3),e("span",J,n(h),1)])],10,R))),128))])])])),B(z,{name:"pop"},{default:K(()=>[b.value?(r(),a("div",Z,[b.value==="correct"?(r(),a("div",ee,[...t[7]||(t[7]=[e("span",{class:"text-8xl filter drop-shadow-lg"},"‚úÖ",-1),e("span",{class:"font-black text-2xl mt-2"},"+20",-1)])])):f("",!0),b.value==="wrong"?(r(),a("div",te,[...t[8]||(t[8]=[e("span",{class:"text-8xl filter drop-shadow-lg"},"‚ùå",-1),e("span",{class:"font-black text-2xl mt-2"},"-10",-1)])])):f("",!0)])):f("",!0)]),_:1})]))],2))}},le=j(se,[["__scopeId","data-v-076e5c1f"]]);export{le as default};
